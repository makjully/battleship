<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>battle</title>
    <link rel="icon" type="image/png" href="https://www.publicdomainpictures.net/pictures/350000/velka/paper-boat.png"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/webjars/bootstrap/4.6.0/css/bootstrap.css"/>
    <link rel="stylesheet" th:href="@{/table.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/footer.css}" type="text/css">
    <script type="text/javascript" src="/webjars/jquery/3.6.0/jquery.js"></script>
    <script type="text/javascript" src="/webjars/bootstrap/4.6.0/js/bootstrap.js"></script>
    <script th:inline="javascript">
        var LOGIN = /*[[${user.login}]]*/ "";
    </script>
</head>
<body>
<nav class="navbar navbar-expand-md navbar-dark bg-dark">
    <div class="d-flex align-items-baseline">
        <a class="navbar-brand mb-0 h1">
            <img src="https://www.publicdomainpictures.net/pictures/350000/velka/paper-boat.png" height="41">
            <span class="align-middle ml-2">-Battleship-</span>
        </a>
    </div>
    <div class="navbar-collapse collapse justify-content-stretch" id="navbar7" aria-controls="navbar7">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
                <form action="/logout" method="post">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <a class="nav-link" href="#" onclick="this.parentNode.submit();">Logout</a>
                </form>
            </li>
        </ul>
    </div>
</nav>
<div class="container" style="margin-top: 45px">
    <div class="form-row">
        <div class="col-md-6 d-flex justify-content-center">
            <table id="my_board">
                <caption style="caption-side: top; text-align: center; font-size: large"
                         th:text="${user.login}"></caption>
                <th:block th:each="i: ${#numbers.sequence(0, 9)}">
                    <tr>
                        <th:block th:each="j: ${#numbers.sequence(0, 9)}">
                            <td th:attr="data-x=${i},data-y=${j}"></td>
                        </th:block>
                    </tr>
                </th:block>
            </table>
        </div>
        <div class="col-md-6 d-flex justify-content-center">
            <table id="opponent_board">
                <caption style="caption-side:top; text-align: center; font-size: large"
                         th:if="${room.accepting != null}"
                         th:text="*{room.inviter.equals(user)} ? ${room.accepting.login} : ${room.inviter.login}">
                </caption>
                <caption style="caption-side:top; text-align: center; font-size: large"
                         th:if="${room.accepting == null}"
                         th:text="unknown"></caption>
                <th:block th:each="i: ${#numbers.sequence(0, 9)}">
                    <tr>
                        <th:block th:each="j: ${#numbers.sequence(0, 9)}">
                            <td th:attr="data-x=${i},data-y=${j}"></td>
                        </th:block>
                    </tr>
                </th:block>
            </table>
        </div>
    </div>
    <div class="form-row text-center" style="margin-top: 45px">
        <div class="col-12">
            <span id="message">...</span>
        </div>
    </div>
    <div class="form-row text-center" style="margin-top: 45px">
        <div class="col-12">
            <button class="btn btn-outline-dark" style="width: 300px" onclick="arrangeShips()">
                Arrange ships
            </button>
        </div>
    </div>
    <div class="form-row text-center" style="margin-top: 15px">
        <div class="col-12">
            <form action="/app/game/ready" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <input type="hidden" name="id" th:value="${room.id}"/>
                <button type="submit" class="btn btn-outline-dark" style="width: 300px">Ready to play</button>
            </form>
        </div>
    </div>
    <div class="form-row text-center" style="margin-top: 15px">
        <div class="col-12">
            <form action="/app/game/start" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                <input type="hidden" name="id" th:value="${room.id}"/>
                <button disabled type="submit" class="btn btn-dark" style="width: 300px"
                        th:if="${room.inviter.equals(user)}">
                    Start game
                </button>
            </form>
        </div>
    </div>
</div>

<footer>
    <div th:replace="fragments/footer :: footer"></div>
</footer>

<script type="text/javascript" src="/gameboard.js"></script>
</body>
</html>